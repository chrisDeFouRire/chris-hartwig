---
import "../styles/global.css";
import MobileNavigation from "../components/MobileNavigation";
import packageJson from "../../package.json";

const {
  title = "Vibe Software Engineering",
  description = "Exploring AI in Software Engineering",
  showHeader = true,
  showFooter = true,
  withContainer = true,
  ogImage = "/og-image.jpg",
} = Astro.props;

const siteUrl = Astro.site?.href || 'https://chris-hartwig.com';
const fullOgImage = ogImage.startsWith('http') ? ogImage : `${siteUrl}${ogImage}`;
const fullUrl = Astro.url.href;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="theme-color" content="#5a4ae3" />
    <link rel="sitemap" type="application/xml" href="/sitemap-index.xml" />
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={fullUrl} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={fullOgImage} />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={fullUrl} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={fullOgImage} />

    <!-- Preload critical fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script
      is:inline
      src="https://analytics.ahrefs.com/analytics.js"
      data-key="JM/oaVE59tp5xSrTMWU7LQ"
      async></script>
  </head>
  <body class="min-h-screen flex flex-col">
    {
      showHeader && (
        <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-sm border-b border-gray-200">
          <div class="container">
            <div class="flex items-center justify-between h-16">
              <div class="flex items-center space-x-2">
                <a href="/" class="text-xl font-bold text-primary no-underline">
                  Chris Hartwig
                </a>
                <span class="text-lg text-gray-400">
                  <span class="md:hidden">Vibe SWE</span>
                  <span class="hidden md:inline">AI for Software Engineering</span>
                </span>
              </div>

              <nav class="hidden md:flex items-center space-x-8">
                <a
                  href="/"
                  class="text-gray-600 hover:text-primary font-medium"
                >
                  Home
                </a>
                <a
                  href="/blog/"
                  class="text-gray-600 hover:text-primary font-medium"
                >
                  Blog
                </a>
                <a
                  href="/newsletter/"
                  class="text-gray-600 hover:text-primary font-medium"
                >
                  Newsletter
                </a>
                <a
                  href="/about/"
                  class="text-gray-600 hover:text-primary font-medium"
                >
                  About
                </a>
                <a
                  href="/resume/"
                  class="text-gray-600 hover:text-primary font-medium"
                >
                  Resume
                </a>
              </nav>
            </div>
          </div>
        </header>
      )
    }

    <MobileNavigation client:load />

    <main class={`${withContainer && "container"} flex-grow`}>
      <slot />
    </main>

    {
      showFooter && (
        <footer class="border-t border-gray-200 bg-gray-50 mt-16">
          <div class="container py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
              <div class="md:col-span-2">
                <h3 class="text-lg font-bold text-gray-900 mb-4">
                  Vibe Software Engineering
                </h3>
                <p class="text-gray-600 max-w-md">
                  Exploring the intersection of AI and Software Engineering.
                  Weekly insights on AI coding tools, techniques, and best
                  practices.
                </p>
              </div>

              <div>
                <h3 class="text-sm font-semibold text-gray-900 uppercase tracking-wider mb-4">
                  Navigation
                </h3>
                <ul class="space-y-2">
                  <li>
                    <a href="/" class="text-gray-600 hover:text-primary">
                      Home
                    </a>
                  </li>
                  <li>
                    <a href="/blog/" class="text-gray-600 hover:text-primary">
                      Blog
                    </a>
                  </li>
                  <li>
                    <a
                      href="/newsletter/"
                      class="text-gray-600 hover:text-primary"
                    >
                      Newsletter
                    </a>
                  </li>
                  <li>
                    <a href="/about/" class="text-gray-600 hover:text-primary">
                      About
                    </a>
                  </li>
                  <li>
                    <a href="/resume/" class="text-gray-600 hover:text-primary">
                      Resume
                    </a>
                  </li>
                </ul>
              </div>

              <div>
                <h3 class="text-sm font-semibold text-gray-900 uppercase tracking-wider mb-4">
                  Connect
                </h3>
                <ul class="space-y-2">
                  <li>
                    <a
                      href="https://www.linkedin.com/in/christophe-hartwig-ba228a5/"
                      class="text-gray-600 hover:text-primary"
                    >
                      LinkedIn
                    </a>
                  </li>
                  <li>
                    <a
                      href="https://twitter.com/GoneVibing"
                      class="text-gray-600 hover:text-primary"
                    >
                      Twitter
                    </a>
                  </li>
                  <li>
                    <a
                      href="https://github.com/chrisdefourire"
                      class="text-gray-600 hover:text-primary"
                    >
                      GitHub
                    </a>
                  </li>
                  <li>
                    <a
                      href="/newsletter/"
                      class="text-gray-600 hover:text-primary"
                    >
                      Subscribe
                    </a>
                  </li>
                  <li>
                    <a
                      href="/rss.xml"
                      class="text-gray-600 hover:text-primary"
                    >
                      RSS Feed
                    </a>
                  </li>
                </ul>
              </div>
            </div>

            <div class="border-t border-gray-200 mt-8 pt-8 text-sm text-gray-500 flex flex-col md:flex-row justify-between items-center">
              <p>
                &copy; {new Date().getFullYear()} Gone Coding Ltd. All rights
                reserved. {packageJson.version}
              </p>
              <div class="mt-4 md:mt-0">
                <a href="/privacy/" class="mr-4 hover:text-primary">
                  Privacy Policy
                </a>
                <a href="/terms/" class="hover:text-primary">
                  Terms of Service
                </a>
              </div>
            </div>
          </div>
        </footer>
      )
    }
  </body>
</html>
