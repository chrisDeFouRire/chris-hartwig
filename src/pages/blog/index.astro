---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import BlogPostEntry from "../../components/BlogPostEntry.tsx";

const blogPosts = (await getCollection("blog"))
  .filter((post) => !post.data.draft)
  .sort((a, b) => {
    const diff = b.data.pubDate.getTime() - a.data.pubDate.getTime();
    if (diff !== 0) return diff;
    return a.slug.localeCompare(b.slug);
  });
---

<BaseLayout
  title="Blog | Vibe Software Engineering"
  description="Every week, we publish practical insights, tutorials, and analysis for professionals on how AI is transforming Software Engineering and how we should transform with it."
>
  <section class="section">
    <div class="max-w-4xl mx-auto">
      <div class="text-center mb-12">
        <h1 class="text-3xl md:text-4xl font-bold mb-4">
          AI Software Engineering Insights
        </h1>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
          Weekly articles on AI coding tools, techniques, and the future of
          software development.
        </p>
      </div>

      <div class="space-y-8">
        {blogPosts.map((post) => (
          <BlogPostEntry
            slug={post.slug}
            title={post.data.title}
            description={post.data.description}
            image={post.data.image}
            pubDate={post.data.pubDate}
            author={post.data.author}
            readingTime={Math.ceil(post.body.length / 1000)}
          />
        ))}
      </div>

      <div class="mt-12 text-center">
        <a
          href="/newsletter/"
          class="btn-primary inline-flex items-center px-5 py-3 no-underline"
        >
          Subscribe for Weekly Updates
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5 ml-2"
            viewBox="0 0 20 20"
            fill="currentColor"
          >
            <path
              d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"
            ></path>
            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"
            ></path>
          </svg>
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
